{% extends "base/base.html" %}
<!-- Cargar estáticos -->
{% load static %}
<!-- Estilos específicos -->
{% block styles %}
<link rel="stylesheet" href="{% static 'css/category_detail.css' %}" />
{% endblock %}

<!-- Contenido de la página de detalle de categoría -->
{% block content %}
<div class="anchors-btn-container">
	<!-- Enlace para crear un enlace -->
	<a href="{% url 'create_anchor' object.pk %}" class="create-btn">+</a>

	<div class="form-and-toggle-container">
		<!-- Formulario de búsqueda -->
		{% include "search_form.html" %}
		<!-- checkbox de edición -->
		{% include "toggle_switch.html" %}
	</div>
</div>

<!-- Mostrar enlaces (anchors) -->
<main
	class="category_detail-main"
	style="background-image: {{ object.bg_color }}"
>
	<div class="h1-container">
		<h1>{{ object.name|upper }}</h1>
	</div>

	<section>
		{% if anchors %} {% for anchor in anchors %}
		<div class="anchor">
			<a href="{{ anchor.link }}" target="_blank">
				<div>
					<img src="{{ anchor.image.url }}" alt="{{ anchor.name }}" />
					<h2>{{ anchor.name }}</h2>
				</div>
			</a>

			{% if anchor.user == user %}
			<!-- Mostrar opciones de edición solo si el usuario autenticado es el propietario del enlace -->
			<a href="{% url 'delete_anchor' anchor.pk %}" class="delete-btn"
				>X</a
			>
			<a href="{% url 'update_anchor' anchor.pk %}" class="update-btn">
				<img
					src="{% static 'images/icons/edit.png' %}"
					alt="Editar enlace"
				/>
			</a>
			{% endif %}
		</div>
		{% endfor %} {% else %}
		<div id="not-found">
			<img
				src="{% static 'images/homer.png' %}"
				alt="No se encontraron resultados"
			/>
			<p>¡Mosquis!</p>
		</div>
		{% endif %}
	</section>
</main>

{% endblock %}
